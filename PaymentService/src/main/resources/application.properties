spring.application.name=PaymentService
server.port=9090
spring.datasource.url=jdbc:mysql://localhost:3306/paymentdb
spring.datasource.username=root
spring.datasource.password=admin
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# 1. Base/Default Configuration
# This defines a default set of parameters for any circuit breaker that doesn't 
# explicitly specify them or uses 'baseConfig: default'

# Sliding window type: COUNT_BASED (based on number of calls) or TIME_BASED (based on time duration)
resilience4j.circuitbreaker.configs.default.slidingWindowType=COUNT_BASED
# The number of calls stored in the sliding window
resilience4j.circuitbreaker.configs.default.slidingWindowSize=10
# The failure rate threshold (percentage) above which the circuit opens
resilience4j.circuitbreaker.configs.default.failureRateThreshold=50
# The duration the circuit should stay open before switching to HALF_OPEN state
resilience4j.circuitbreaker.configs.default.waitDurationInOpenState=5s
# The number of calls permitted in the HALF_OPEN state before switching to CLOSED or OPEN
resilience4j.circuitbreaker.configs.default.permittedNumberOfCallsInHalfOpenState=3

# 2. Specific Instance Configuration
# This links the 'externalService' circuit breaker (used in @CircuitBreaker(name="externalService")) 
# to the 'default' configuration.

resilience4j.circuitbreaker.instances.externalService.baseConfig=default

# --- Actuator Configuration (Highly Recommended for Monitoring) ---

# Expose the necessary Actuator endpoints for health and metrics
management.endpoints.web.exposure.include=health,metrics,circuitbreakers
